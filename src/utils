"""
    load_component_properties(filepath::String)

Load component properties from a file.

# Arguments
- `filepath::String`: Path to the file containing the component properties.

# Returns
- `properties::Dict`: A dictionary containing the component properties.
"""
function load_component_properties(component_name::String)
    file_path = abspath(joinpath(@__DIR__, "database/$(component_name).json"))
    if isfile(file_path)
        return JSON.parsefile(file_path)
    else
        error("Component file does not exist: $file_path")
    end
end


function read_reidcp(data, substances)
    a = []
    b = []
    c = []
    d = []
    e = []

    for i in eachindex(substances)
        reidcp = data[substances[i]]["ReidCp"]
        push!(a, Float64(reidcp[1]))
        push!(b, Float64(reidcp[2]))
        push!(c, Float64(reidcp[3]))
        push!(d, Float64(reidcp[4]))
        push!(e, Float64(reidcp[5]))
    end

    return (a = Float64.(a), b = Float64.(b), c = Float64.(c), d = Float64.(d), e = Float64.(e))
end


#= struct my_model
    Cp
    ρ_coefs
    h_0
end

function enthalpy_simple(m::my_model, P::Real, T::Real, N::AbstractVectorOfArray{Real})
    sum(m.Cp[i]*N[i]*(T - 298.15) for i in eachindex(N)) + sum(N[i]*m.h_0[i] for i in eachindex(N))
end

function molar_density_simple(m::my_model, P::Real, T::Real, N::AbstractVectorOfArray{Real})
        sum(N)/sum(N[i]/(m.ρ_coefs["a"][i] + m.ρ_coefs["b"][i]*T + m.ρ_coefs["c"][i]*T^2  + m.ρ_coefs["d"][i]*T^3) for i in eachindex(N))  
end
 =#


rho_surrogate = load_object(abspath(joinpath(@__DIR__, "database/surrogates/rho_surrogate.jld")))
h_surrogate = load_object(abspath(joinpath(@__DIR__, "database/surrogates/H_surrogate.jld")))

struct surrogates
    rho::RadialBasis
    h::RadialBasis
end

surro = surrogates(rho_surrogate, h_surrogate)

function predict_ρ(surrogate::surrogates, T, x::AbstractArray)
    surrogate.rho([T, x...])
end

function predict_h(surrogate::surrogates, T, x::AbstractArray)
    surrogate.h([T, x...])
end

@register_symbolic predict_ρ(surrogate::surrogates, T, x::AbstractArray)
@register_symbolic predict_h(surrogate::surrogates, T, x::AbstractArray)
